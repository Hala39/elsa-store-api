(self.webpackChunkelsa=self.webpackChunkelsa||[]).push([[346],{1346:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ProductModule:()=>J});var n=i(8619),o=i(1116),s=i(2290),r=i(9713),a=i(250),c=i(8807);const p=["mask"];function l(t,e){1&t&&n.GkF(0)}function d(t,e){if(1&t&&(n.ynx(0),n.YNc(1,l,1,0,"ng-container",7),n.BQk()),2&t){const t=n.oxw(2);n.xp6(1),n.Q6J("ngTemplateOutlet",t.indicatorTemplate)}}function u(t,e){1&t&&n._UZ(0,"i",8)}function h(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"div",4),n.NdJ("click",function(){return n.CHM(t),n.oxw().onImageClick()}),n.YNc(1,d,2,1,"ng-container",5),n.YNc(2,u,1,0,"ng-template",null,6,n.W1O),n.qZA()}if(2&t){const t=n.MAs(3),e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.indicatorTemplate)("ngIfElse",t)}}const m=function(t,e){return{showTransitionParams:t,hideTransitionParams:e}},g=function(t){return{value:"visible",params:t}};function f(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"div"),n.NdJ("@animation.start",function(e){return n.CHM(t),n.oxw(2).onAnimationStart(e)})("@animation.done",function(e){return n.CHM(t),n.oxw(2).onAnimationEnd(e)}),n.TgZ(1,"img",21),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).onPreviewImageClick()}),n.qZA(),n.qZA()}if(2&t){const t=n.oxw(2);n.Q6J("@animation",n.VKq(6,g,n.WLB(3,m,t.showTransitionOptions,t.hideTransitionOptions))),n.xp6(1),n.Q6J("ngStyle",t.imagePreviewStyle()),n.uIk("src",t.src,n.LSH)}}function w(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"div",9,10),n.NdJ("click",function(){return n.CHM(t),n.oxw().onMaskClick()}),n.TgZ(2,"div",11),n.TgZ(3,"button",12),n.NdJ("click",function(){return n.CHM(t),n.oxw().rotateRight()}),n._UZ(4,"i",13),n.qZA(),n.TgZ(5,"button",12),n.NdJ("click",function(){return n.CHM(t),n.oxw().rotateLeft()}),n._UZ(6,"i",14),n.qZA(),n.TgZ(7,"button",15),n.NdJ("click",function(){return n.CHM(t),n.oxw().zoomOut()}),n._UZ(8,"i",16),n.qZA(),n.TgZ(9,"button",15),n.NdJ("click",function(){return n.CHM(t),n.oxw().zoomIn()}),n._UZ(10,"i",17),n.qZA(),n.TgZ(11,"button",18),n._UZ(12,"i",19),n.qZA(),n.qZA(),n.YNc(13,f,2,8,"div",20),n.qZA()}if(2&t){const t=n.oxw();n.xp6(7),n.Q6J("disabled",t.zoomDisabled()),n.xp6(2),n.Q6J("disabled",t.zoomDisabled()),n.xp6(4),n.Q6J("ngIf",t.previewVisible)}}let v=(()=>{class t{constructor(t,e){this.config=t,this.cd=e,this.preview=!1,this.showTransitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.onShow=new n.vpe,this.onHide=new n.vpe,this.maskVisible=!1,this.previewVisible=!1,this.rotate=0,this.scale=1,this.previewClick=!1}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"indicator":default:this.indicatorTemplate=t.template}})}onImageClick(){this.preview&&(this.maskVisible=!0,this.previewVisible=!0)}onMaskClick(){this.previewClick||(this.previewVisible=!1,this.rotate=0,this.scale=1),this.previewClick=!1}onPreviewImageClick(){this.previewClick=!0}rotateRight(){this.rotate+=90,this.previewClick=!0}rotateLeft(){this.rotate-=90,this.previewClick=!0}zoomIn(){this.scale=this.scale+.1,this.previewClick=!0}zoomOut(){this.scale=this.scale-.1,this.previewClick=!0}zoomDisabled(){return this.scale<=.5||this.scale>=1.5}onAnimationStart(t){switch(t.toState){case"visible":this.container=t.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop();break;case"void":a.p.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(t){switch(t.toState){case"void":c.P9.clear(this.container),this.maskVisible=!1,this.container=null,this.wrapper=null,this.cd.markForCheck(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}moveOnTop(){c.P9.set("modal",this.container,this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):a.p.appendChild(this.wrapper,this.appendTo))}imagePreviewStyle(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}}containerClass(){return{"p-image p-component":!0,"p-image-preview-container":this.preview}}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(s.b4),n.Y36(n.sBO))},t.\u0275cmp=n.Xpm({type:t,selectors:[["p-image"]],contentQueries:function(t,e,i){if(1&t&&n.Suo(i,s.jx,4),2&t){let t;n.iGM(t=n.CRH())&&(e.templates=t)}},viewQuery:function(t,e){if(1&t&&n.Gf(p,5),2&t){let t;n.iGM(t=n.CRH())&&(e.mask=t.first)}},hostAttrs:[1,"p-element"],inputs:{imageClass:"imageClass",imageStyle:"imageStyle",styleClass:"styleClass",style:"style",src:"src",alt:"alt",width:"width",height:"height",appendTo:"appendTo",preview:"preview",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide"},decls:4,vars:13,consts:[[3,"ngClass","ngStyle"],[3,"ngStyle"],["class","p-image-preview-indicator",3,"click",4,"ngIf"],["class","p-image-mask p-component-overlay p-component-overlay-enter",3,"click",4,"ngIf"],[1,"p-image-preview-indicator",3,"click"],[4,"ngIf","ngIfElse"],["defaultTemplate",""],[4,"ngTemplateOutlet"],[1,"p-image-preview-icon","pi","pi-eye"],[1,"p-image-mask","p-component-overlay","p-component-overlay-enter",3,"click"],["mask",""],[1,"p-image-toolbar"],["type","button",1,"p-image-action","p-link",3,"click"],[1,"pi","pi-refresh"],[1,"pi","pi-undo"],["type","button",1,"p-image-action","p-link",3,"disabled","click"],[1,"pi","pi-search-minus"],[1,"pi","pi-search-plus"],["type","button",1,"p-image-action","p-link"],[1,"pi","pi-times"],[4,"ngIf"],[1,"p-image-preview",3,"ngStyle","click"]],template:function(t,e){1&t&&(n.TgZ(0,"span",0),n._UZ(1,"img",1),n.YNc(2,h,4,2,"div",2),n.YNc(3,w,14,3,"div",3),n.qZA()),2&t&&(n.Tol(e.styleClass),n.Q6J("ngClass",e.containerClass())("ngStyle",e.style),n.xp6(1),n.Tol(e.imageClass),n.Q6J("ngStyle",e.imageStyle),n.uIk("src",e.src,n.LSH)("alt",e.alt)("width",e.width)("height",e.height),n.xp6(1),n.Q6J("ngIf",e.preview),n.xp6(1),n.Q6J("ngIf",e.maskVisible))},directives:[o.mk,o.PC,o.O5,o.tP],styles:[".p-image-mask{display:flex;align-items:center;justify-content:center}.p-image-preview-container{position:relative;display:inline-block}.p-image-preview-indicator{position:absolute;left:0;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s}.p-image-preview-icon{font-size:1.5rem}.p-image-preview-container:hover>.p-image-preview-indicator{opacity:1;cursor:pointer}.p-image-preview-container>img{cursor:pointer}.p-image-toolbar{position:absolute;top:0;right:0;display:flex}.p-image-action.p-link{display:flex;justify-content:center;align-items:center}.p-image-preview{transition:transform .15s;max-width:100vw;max-height:100vh}"],encapsulation:2,data:{animation:[(0,r.X$)("animation",[(0,r.eR)("void => visible",[(0,r.oB)({transform:"scale(0.7)",opacity:0}),(0,r.jt)("{{showTransitionParams}}")]),(0,r.eR)("visible => void",[(0,r.jt)("{{hideTransitionParams}}",(0,r.oB)({transform:"scale(0.7)",opacity:0}))])])]},changeDetection:0}),t})(),b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[o.ez],s.m8]}),t})();var C=i(673),y=i(1462),k=i(878),Z=i(529),T=i(9996),x=i(2693);let M=(()=>{class t{constructor(t){this.apiCaller=t,this.baseUrl=Z.N.ApiUrl}getProductById(t){return this.apiCaller.get(this.baseUrl+"product/"+t.toString()).pipe((0,T.U)(t=>(this.product=t,t)))}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(x.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=i(6566),q=i(8654),z=i(4568),I=i(4094),O=i(7422);let A=(()=>{class t{constructor(t,e,i,n,o){this.colorService=t,this.messageService=e,this.activatedRoute=i,this.basketService=n,this.router=o,this.productId=+this.activatedRoute.snapshot.paramMap.get("id"),this.sizes=[],this.colors=[],this.quantity=1,this.selectedColor=null,this.selectedSize=null,this.max=1,this.loadProduct()}ngOnInit(){this.initializeDropdowns(),window.scrollTo(0,0)}loadProduct(){this.product&&(0,k.of)(this.product),this.colorService.getProductById(this.productId).subscribe(t=>{t&&(this.product=t,this.productColors=t.colors,this.productColors.forEach(t=>{this.colors.push(t.color)}))},t=>{console.log(t)})}selectColor(t){const e=this.productColors.find(e=>e.color.name===t);e&&(this.sizes=this.sizes.concat(e.sizeOptions),this.product.mainImageUrl=e.url,this.max=e.quantity)}selectSize(t){null!==this.selectedSize&&(this.max=this.sizes.find(e=>e.size.name===t).quantity)}initializeDropdowns(){this.colors=[{id:0,name:"Color",inactive:!0}],this.sizes=[{size:{id:0,name:"Size",inactive:!0},quantity:20}]}addToBasket(){if(null===this.selectColor)this.messageService.add({severity:"warn",summary:"Missing Information",detail:"Please choose a color!"});else{if(null!==this.selectedSize)return this.basketService.addItemToBasket(this.product,this.quantity,this.selectedSize,this.selectedColor,this.product.mainImageUrl);this.messageService.add({severity:"warn",summary:"Missing Information",detail:"Please choose a size!"})}}buyItNow(){if(null===this.selectColor)this.messageService.add({severity:"warn",summary:"Missing Information",detail:"Please choose a color!"});else if(null===this.selectedSize)this.messageService.add({severity:"warn",summary:"Missing Information",detail:"Please choose a size!"});else{const t=this.basketService.mapProductItemToBasketItem(this.product,this.quantity,this.selectedSize,this.selectedColor,this.product.mainImageUrl);this.basketService.orderItemsSource.next([t]),this.router.navigateByUrl("/order/place")}}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(M),n.Y36(s.ez),n.Y36(S.gz),n.Y36(q.v),n.Y36(S.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-product"]],decls:30,vars:17,consts:[[1,"container-fluid","mt-4","px-5","py-5"],[1,"row"],[1,"d-flex","justify-content-center","col-12","col-sm-4","mb-3"],[3,"src","alt","preview"],[1,"col-12","col-sm-8","pt-2","options"],[1,"row","mb-1"],[2,"font-weight","600"],[1,"row","mb-3"],[2,"font-weight","500"],[2,"font-weight","700"],[1,"p-toolbar-group-right"],["optionLabel","name","optionValue","name","optionDisabled","inactive",3,"options","ngModel","ngModelChange","onChange"],["optionLabel","size.name","optionValue","size.name","optionDisabled","inactive",1,"p-ml-3",3,"options","ngModel","ngModelChange","onChange"],["inputId","minmax","inputId","minmax","mode","decimal",1,"quntity","p-ml-3",3,"ngModel","showButtons","min","max","ngModelChange"],[1,"row","mt-4"],[1,"p-toolbar-group-right","pt-3"],["pRipple","","type","button",1,"btn","outlined","p-mr-2","p-d-inline-block",3,"click"],["pRipple","","type","button",1,"btn","heavy",3,"click"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n._UZ(3,"p-image",3),n.qZA(),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n.TgZ(6,"h4",6),n._uU(7),n.qZA(),n.qZA(),n.TgZ(8,"div",7),n.TgZ(9,"h5",8),n._uU(10),n.qZA(),n.qZA(),n.TgZ(11,"div",7),n.TgZ(12,"h6"),n._uU(13),n.qZA(),n.qZA(),n.TgZ(14,"div",7),n.TgZ(15,"h3",9),n._uU(16),n.ALo(17,"currency"),n.qZA(),n.qZA(),n.TgZ(18,"div",7),n.TgZ(19,"div",10),n.TgZ(20,"p-dropdown",11),n.NdJ("ngModelChange",function(t){return e.selectedColor=t})("onChange",function(){return e.selectColor(e.selectedColor)}),n.qZA(),n.TgZ(21,"p-dropdown",12),n.NdJ("ngModelChange",function(t){return e.selectedSize=t})("onChange",function(){return e.selectSize(e.selectedSize)}),n.qZA(),n.TgZ(22,"p-inputNumber",13),n.NdJ("ngModelChange",function(t){return e.quantity=t}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"div",14),n.TgZ(24,"div",15),n.TgZ(25,"button",16),n.NdJ("click",function(){return e.addToBasket()}),n._uU(26,"ADD TO CART"),n.qZA(),n.TgZ(27,"button",17),n.NdJ("click",function(){return e.buyItNow()}),n._uU(28,"BUY IT NOW"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(29,"app-footer")),2&t&&(n.xp6(3),n.Q6J("src",null==e.product?null:e.product.mainImageUrl)("alt",e.product.name)("preview",!0),n.xp6(4),n.Oqu(null==e.product?null:e.product.name),n.xp6(3),n.Oqu(null==e.product?null:e.product.category.name),n.xp6(3),n.Oqu(null==e.product?null:e.product.description),n.xp6(3),n.Oqu(n.lcZ(17,15,null==e.product?null:e.product.price)),n.xp6(4),n.Q6J("options",e.colors)("ngModel",e.selectedColor),n.xp6(1),n.Q6J("options",e.sizes)("ngModel",e.selectedSize),n.xp6(1),n.Q6J("ngModel",e.quantity)("showButtons",!0)("min",1)("max",e.max))},directives:[v,z.Lt,y.JJ,y.On,I.Rn,O.c],pipes:[o.H9],styles:["[_nghost-%COMP%]     .p-image-preview-container>img{cursor:pointer;width:100%}.color-option[_ngcontent-%COMP%]{width:80px;height:80px}.options[_ngcontent-%COMP%]{padding-left:5%}.d-grid[_ngcontent-%COMP%]{margin-left:15%;width:70%}.btn.outlined[_ngcontent-%COMP%]{background-color:#fff;color:#93f}.btn.heavy[_ngcontent-%COMP%], .btn.outlined[_ngcontent-%COMP%]{border:1px solid #93f;box-shadow:none}.btn.heavy[_ngcontent-%COMP%]{background-color:#93f;color:#fff}[_nghost-%COMP%]     .p-dropdown:not(.p-disabled).p-focus{box-shadow:none;border-color:gray}[_nghost-%COMP%]     .p-dropdown:focus{border:1px solid gray}[_nghost-%COMP%]     .p-dropdown-panel .p-dropdown-items .p-dropdown-item.p-highlight{background-color:#93f}[_nghost-%COMP%]     .p-inputnumber-buttons-stacked .p-inputnumber-input{width:50px;box-shadow:none}[_nghost-%COMP%]     .p-inputnumber-buttons-stacked .p-inputnumber-input:focus{border:1px solid gray}[_nghost-%COMP%]     .p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down, [_nghost-%COMP%]     .p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{box-shadow:none;border:#fff}[_nghost-%COMP%]     .p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{background-color:#00d99f}[_nghost-%COMP%]     .p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{background-color:#ffcb30}@media screen and (max-width:1000px){.container-fluid[_ngcontent-%COMP%]{padding-right:0!important;padding-left:0!important}[_nghost-%COMP%]     .p-image-preview-container>img{max-width:95%;text-align:center}.quantity[_ngcontent-%COMP%]{margin-top:20px!important}}"]}),t})();var P=i(1945);const _=[{path:"",component:A}];let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[o.ez,z.kW,I.L$,P.V,b,y.u5,C.m,S.Bz.forChild(_)]]}),t})()}}]);